<app-navbar></app-navbar>
<div class="customer">
  <div class="jumbotron jumbotron-fluid">
    <div class="container">
      <h1 class="display-4"><strong>Customers</strong></h1>
      <p class="lead">
        <strong>All the info about vendors is shown here.</strong>
      </p>
    </div>
  </div>
  <button
    type="button"
    class="btn btn-primary btn-dark"
    (click)="open(addmodal)"
  >
    Add Customer
  </button>
  <!-- Add customer Modal -->
  <ng-template #addmodal let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Insert Details</h4>
    </div>
    <div class="modal-body">
      <form>
        <div class="mb-3">
          <!-- <label for="form-text" class="form-label">FullName :</label> -->
          <input
            type="text"
            name="Name"
            placeholder="FullName"
            class="form-control"
            id="FullName"
            aria-describedby="name"
            [(ngModel)]="Aname"
          />
        </div>
        <div class="mb-3">
          <!-- <label for="form-text" class="form-label">GST :</label> -->
          <input
            type="text"
            name="GST"
            placeholder="GST"
            class="form-control"
            id="gst"
            [(ngModel)]="Agst"
          />
        </div>
        <div class="mb-3">
          <!-- <label for="exampleInputEmail1" class="form-label" 
           >Email address</label 
          >-->
          <input
            type="text"
            name="mail"
            placeholder="Email address"
            class="form-control"
            id="email"
            [(ngModel)]="Aemail"
          />
          <div id="emailHelp" class="form-text">
            We'll never share your email with anyone else.
          </div>
        </div>
        <div class="mb-3">
          <!-- <label for="form-text" class="form-label">Phone :</label> -->
          <input
            type="number"
            name="phone"
            placeholder="Phone"
            class="form-control"
            id="phone"
            [(ngModel)]="Aphone"
          />
        </div>
        <div class="mb-3">
          <!-- <label for="textarea" class="form-control" class="form-label"
            >Address :</label
          > -->
          <input
            type="text"
            name="add"
            placeholder="Address"
            class="form-control"
            id="address"
            [(ngModel)]="Aaddress"
            required
          />
          <div class="invalid-feedback">Please enter your address.</div>
        </div>

        <div class="row">
          <div class="col-md-5 mb-3">
            <!-- <label for="City">City</label> -->
            <input
              type="text"
              name="city"
              placeholder="City"
              class="form-control"
              id="City"
              [(ngModel)]="Acity"
              required=""
            />
            <div class="invalid-feedback">Please select a valid City.</div>
          </div>
          <div class="col-md-4 mb-3">
            <!-- <label for="state">State</label> -->
            <input
              type="text"
              name="state"
              placeholder="State"
              class="form-control"
              id="state"
              [(ngModel)]="Astate"
              required=""
            />
            <div class="invalid-feedback">Please provide a valid state.</div>
          </div>
          <div class="col-md-3 mb-3">
            <!-- <label for="zip">Pin Code</label> -->
            <input
              type="number"
              name="zip"
              placeholder="Pin Code"
              class="form-control"
              id="zip"
              [(ngModel)]="Apin_code"
              required=""
            />
            <div class="invalid-feedback">Zip code required.</div>
          </div>
        </div>
      </form>
    </div>

    <div class="modal-footer">
      <button
        type="button"
        class="btn btn-outline-dark"
        data-dismiss="modal"
        (click)="modal.close('save')"
      >
        Close
      </button>
      <button
        type="button"
        class="btn btn-outline-primary"
        (click)="addcustomer()"
        (click)="modal.dismiss('')"
      >
        Submit
      </button>
    </div>
  </ng-template>

  <!-- main table is here -->

  <div class="container">
    <div class="table-responsive">
      <div class="table-wrapper">
        <div class="table-title">
          <div class="row">
            <table class="table table-striped table-responsive table-bordered">
              <thead>
                <tr>
                  <th scope="row" *ngFor="let column of headers">
                    {{ column }}
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let c of Cust">
                  <td>{{ c.id }}</td>
                  <td>{{ c.name }}</td>
                  <td>{{ c.gst }}</td>
                  <td>{{ c.email }}</td>
                  <td>{{ c.phone }}</td>
                  <td>{{ c.address }}</td>
                  <td>{{ c.city }}</td>
                  <td>{{ c.state }}</td>
                  <td>{{ c.pin_code }}</td>
                  <td>
                    <button
                      type="button"
                      (click)="open(Editmodal)"
                      (click)="getSinglecustomer(c.id)"
                      (click)="update(c)"
                      class="btn"
                    >
                      <i class="bi bi-pencil-square"></i>
                    </button>
                    <ng-template #Editmodal let-modal>
                      <div class="modal-header">
                        <h4 class="modal-title" id="modal-basic-title">
                          Update Customer
                        </h4>
                      </div>
                      <div class="modal-body">
                        <form>
                          <div class="mb-3">
                            <!-- <label for="form-text" class="form-label">FullName :</label> -->
                            <input
                              type="text"
                              name="EName"
                              placeholder="FullName"
                              class="form-control"
                              id="Fullname"
                              [(ngModel)]="CustomerToUpdate.name"
                            />
                          </div>
                          <div class="mb-3">
                            <!-- <label for="form-text" class="form-label">GST :</label> -->
                            <input
                              type="text"
                              name="EGST"
                              placeholder="GST"
                              class="form-control"
                              id="egst"
                              [(ngModel)]="CustomerToUpdate.gst"
                            />
                          </div>
                          <div class="mb-3">
                            <!-- <label for="exampleInputEmail1" class="form-label" 
                             >Email address</label 
                            >-->
                            <input
                              type="text"
                              name="Email"
                              placeholder="Email address"
                              class="form-control"
                              id="email"
                              [(ngModel)]="CustomerToUpdate.email"
                            />
                            <div id="emailHelp" class="form-text">
                              We'll never share your email with anyone else.
                            </div>
                          </div>
                          <div class="mb-3">
                            <!-- <label for="form-text" class="form-label">Phone :</label> -->
                            <input
                              type="number"
                              name="Ephone"
                              placeholder="Phone"
                              class="form-control"
                              id="ephone"
                              [(ngModel)]="CustomerToUpdate.phone"
                            />
                          </div>
                          <div class="mb-3">
                            <!-- <label for="textarea" class="form-control" class="form-label"
                              >Address :</label
                            > -->
                            <input
                              type="text"
                              name="Eadd"
                              placeholder="Address"
                              class="form-control"
                              id="eaddress"
                              [(ngModel)]="CustomerToUpdate.address"
                              required
                            />
                            <div class="invalid-feedback">
                              Please enter your address.
                            </div>
                          </div>

                          <div class="row">
                            <div class="col-md-4 mb-3">
                              <!-- <label for="City">City</label> -->
                              <input
                                type="text"
                                name="Ecity"
                                placeholder="City"
                                class="form-control"
                                id="eCity"
                                [(ngModel)]="CustomerToUpdate.city"
                                required=""
                              />
                              <div class="invalid-feedback">
                                Please select a valid City.
                              </div>
                            </div>
                            <div class="col-md-4 mb-3">
                              <!-- <label for="state">State</label> -->
                              <input
                                type="text"
                                name="Estate"
                                placeholder="State"
                                class="form-control"
                                id="estate"
                                [(ngModel)]="CustomerToUpdate.state"
                                required=""
                              />
                              <div class="invalid-feedback">
                                Please provide a valid state.
                              </div>
                            </div>
                            <div class="col-md-4 mb-3">
                              <!-- <label for="zip">Pin Code</label> -->
                              <input
                                type="number"
                                name="Ezip"
                                placeholder="Pin Code"
                                class="form-control"
                                id="ezip"
                                [(ngModel)]="CustomerToUpdate.pin_code"
                                required=""
                              />
                              <div class="invalid-feedback">
                                Zip code required.
                              </div>
                            </div>
                          </div>
                          <div>
                            <input
                              type="text"
                              type="hidden"
                              name="Eadd_id"
                              placeholder="Address"
                              class="form-control"
                              id="eaddress"
                              [(ngModel)]="CustomerToUpdate.address_id"
                              required
                            />
                            <div class="invalid-feedback">
                              Please enter your address.
                            </div>
                          </div>
                        </form>
                        <div class="modal-footer">
                          <button
                            type="button"
                            class="btn btn-outline-dark"
                            data-dismiss="modal"
                            (click)="modal.close('save')"
                          >
                            Close
                          </button>
                          <button
                            type="button"
                            class="btn btn-outline-primary"
                            (click)="putcustomer(c.id)"
                            (click)="modal.dismiss('')"
                          >
                            Submit
                          </button>
                        </div>
                      </div>
                    </ng-template>
                    <button
                      type="button"
                      class="btn"
                      (click)="open(deleteModal)"
                    >
                      <i class="bi bi-trash"></i>
                    </button>

                    <ng-template #deleteModal let-modal>
                      <div class="modal-header">
                        <h4 class="modal-title" id="modal-basic-title">
                          Warning!
                        </h4>
                      </div>
                      <div class="modal-body">Are you sure?</div>
                      <div class="modal-footer">
                        <button
                          type="button"
                          class="btn btn-outline-dark"
                          (click)="modal.close('Save click')"
                        >
                          Close
                        </button>
                        <button
                          class="btn btn-danger"
                          (click)="deleteUser(c.id)"
                          (click)="modal.dismiss('')"
                        >
                          Delete
                        </button>
                      </div>
                    </ng-template>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
