<app-navbar></app-navbar>

<div class="product">
  <div class="jumbotron jumbotron-fluid">
    <div class="container">
      <h1 class="display-4"><strong>Products</strong></h1>
      <p class="lead"><strong>Here you can manage all your products</strong></p>
    </div>
  </div>

  <button
    type="button"
    class="btn btn-primary btn-dark"
    (click)="open(addmodal)"
  >
    Create Product
  </button>

  <!-- Add warehouse Modal -->
  <ng-template #addmodal let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Insert Details</h4>
    </div>
    <div class="modal-body">
      <form>
        <div class="mb-3">
          <!-- <label for="form-text" class="form-label">FullName :</label> -->
          <input
            type="text"
            name="Name"
            placeholder="Name"
            class="form-control"
            id="FullName"
            aria-describedby="name"
            [(ngModel)]="Aname"
          />
        </div>

        <div class="row">
          <div class="mb-3">
            <!-- <label for="form-text" class="form-label">GST :</label> -->
            <input
              type="number"
              name="unit_price"
              placeholder="Unit Price"
              class="form-control"
              id="unit_price"
              [(ngModel)]="Aunit_price"
            />
          </div>
          <div class="mb-3">
            <!-- <label for="form-text" class="form-label">GST :</label> -->
            <input
              type="number"
              name="hsn_code"
              placeholder="HSN Code"
              class="form-control"
              id="hsn_code"
              [(ngModel)]="Ahsn_code"
            />
          </div>
        </div>
      </form>
    </div>

    <div class="modal-footer">
      <button
        type="button"
        class="btn btn-outline-dark"
        data-dismiss="modal"
        (click)="modal.close('save')"
      >
        Close
      </button>
      <button
        type="button"
        class="btn btn-outline-primary"
        (click)="addproduct()"
        (click)="modal.dismiss('')"
      >
        Submit
      </button>
    </div>
  </ng-template>

  <!-- main table is here -->

  <div class="container">
    <div class="table-responsive">
      <div class="table-wrapper">
        <div class="table-title">
          <div class="row">
            <table class="table table-striped table-responsive table-bordered">
              <thead>
                <tr>
                  <th scope="row" *ngFor="let column of headers">
                    {{ column }}
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let p of Prod">
                  <td>{{ p.id }}</td>
                  <td>{{ p.name }}</td>
                  <td>{{ p.unit_price }}</td>
                  <td>{{ p.hsn_code }}</td>
                  <td>
                    <button
                      type="button"
                      (click)="open(Editmodal)"
                      (click)="getSingleproduct(p.id)"
                      (click)="update(p)"
                      class="btn"
                    >
                      <i class="bi bi-pencil-square"></i>
                    </button>
                    <ng-template #Editmodal let-modal>
                      <div class="modal-header">
                        <h4 class="modal-title" id="modal-basic-title">
                          Update Product
                        </h4>
                      </div>
                      <div class="modal-body">
                        <form>
                          <div class="mb-3">
                            <!-- <label for="form-text" class="form-label">FullName :</label> -->
                            <input
                              type="text"
                              name="EName"
                              placeholder="Name"
                              class="form-control"
                              id="Fullname"
                              [(ngModel)]="ProductToUpdate.name"
                            />
                          </div>

                          <div class="mb-3">
                            <!-- <label for="form-text" class="form-label">GST :</label> -->
                            <input
                              type="text"
                              name="Eunit_price"
                              placeholder="Unit Price"
                              class="form-control"
                              id="Eunit_price"
                              [(ngModel)]="ProductToUpdate.unit_price"
                            />
                          </div>
                          <div class="mb-3">
                            <!-- <label for="form-text" class="form-label">GST :</label> -->
                            <input
                              type="text"
                              name="Eamount"
                              placeholder="Amount"
                              class="form-control"
                              id="eamount"
                              [(ngModel)]="ProductToUpdate.hsn_code"
                            />
                          </div>
                        </form>
                        <div class="modal-footer">
                          <button
                            type="button"
                            class="btn btn-outline-dark"
                            data-dismiss="modal"
                            (click)="modal.close('save')"
                          >
                            Close
                          </button>
                          <button
                            type="button"
                            class="btn btn-outline-primary"
                            (click)="putwarehouse(p.id)"
                            (click)="modal.dismiss('')"
                          >
                            Submit
                          </button>
                        </div>
                      </div>
                    </ng-template>
                    <button
                      type="button"
                      class="btn"
                      (click)="open(deleteModal)"
                    >
                      <i class="bi bi-trash"></i>
                    </button>

                    <ng-template #deleteModal let-modal>
                      <div class="modal-header">
                        <h4 class="modal-title" id="modal-basic-title">
                          Warning!
                        </h4>
                      </div>
                      <div class="modal-body">Are you sure?</div>
                      <div class="modal-footer">
                        <button
                          type="button"
                          class="btn btn-outline-dark"
                          (click)="modal.close('Save click')"
                        >
                          Close
                        </button>
                        <button
                          class="btn btn-danger"
                          (click)="deleteUser(p.id)"
                          (click)="modal.dismiss('')"
                        >
                          Delete
                        </button>
                      </div>
                    </ng-template>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
